---
import { getPageTranslations } from "@/i18n/i18n";
import type { Locale } from "@/types";
import { cn } from "@/lib/utils";
import type { HeroAction } from "./Hero.astro";
import { Star, MapPin, Users, Clock } from "@lucide/astro";

export interface Props {
  title: string;
  locale?: Locale;
  description?: string;
  actions?: HeroAction[];
}

const { title, locale = "ru", actions = [], description = "" } = Astro.props;
const { t } = await getPageTranslations(locale, ["hero", "common"]);

const getActionButtonClasses = (actionVariant: string = "primary") => {
  const baseClasses =
    "inline-flex items-center justify-center px-6 py-3 rounded-full font-semibold text-sm transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 backdrop-blur-sm shadow-lg hover:shadow-xl transform hover:scale-105";

  switch (actionVariant) {
    case "secondary":
      return cn(
        baseClasses,
        "bg-primary-foreground/20 text-foreground border border-primary-foreground/30 hover:bg-primary-foreground/30 focus:ring-primary-foreground/50"
      );
    case "outline":
      return cn(
        baseClasses,
        "border-2 border-primary-foreground text-foreground bg-transparent hover:bg-primary-foreground hover:text-primary focus:ring-primary-foreground"
      );
    default:
      return cn(
        baseClasses,
        "bg-primary text-primary-foreground hover:bg-primary/90 focus:ring-primary hover:text-foreground/90"
      );
  }
};
---

<div
  class="bg-background text-foreground rounded-3xl p-8 w-full max-w-2xl shadow-2xl border border-primary-foreground/20"
>
  <!-- Header with emotional hook -->
  <div class="mb-6">
    <h2
      class="text-3xl lg:text-4xl font-bold text-foreground mb-3 leading-tight"
    >
      {title}
    </h2>
    <div class="flex items-center gap-2 text-foreground/90 text-sm mb-4">
      <div class="flex items-center gap-1">
        <Star class="w-4 h-4 fill-yellow-400 text-yellow-400" />
        <Star class="w-4 h-4 fill-yellow-400 text-yellow-400" />
        <Star class="w-4 h-4 fill-yellow-400 text-yellow-400" />
        <Star class="w-4 h-4 fill-yellow-400 text-yellow-400" />
        <Star class="w-4 h-4 fill-yellow-400 text-yellow-400" />
        <span class="ml-2 font-medium">–ê–∫–∫—Ä–µ–¥–∏—Ç–æ–≤–∞–Ω–Ω—ã–π –≥–∏–¥</span>
      </div>
    </div>
  </div>

  <!-- Key value proposition -->
  <div class="mb-6">
    <h3 class="text-xl font-semibold text-foreground mb-3">
      –ñ–∏–≤—ã–µ —ç–º–æ—Ü–∏–∏ –≤–º–µ—Å—Ç–æ —Å–∫—É—á–Ω—ã—Ö —Ñ–∞–∫—Ç–æ–≤
    </h3>
    <p class="text-foreground/90 text-base leading-relaxed mb-4">
      {description}
    </p>
  </div>

  <!-- Social proof & highlights -->
  <div class="grid grid-cols-3 gap-4 mb-6">
    <div class="text-center group">
      <div
        class="flex items-center justify-center w-12 h-12 bg-primary/20 rounded-full mx-auto mb-2 group-hover:bg-primary/30 transition-colors"
      >
        <MapPin class="w-6 h-6 text-primary" />
      </div>
      <div class="text-foreground font-semibold text-sm">5+ –≥–æ—Ä–æ–¥–æ–≤</div>
      <div class="text-muted-foreground text-xs">–õ–∏–≥—É—Ä–∏–∏</div>
    </div>
    <div class="text-center group">
      <div
        class="flex items-center justify-center w-12 h-12 bg-secondary/20 rounded-full mx-auto mb-2 group-hover:bg-secondary/30 transition-colors"
      >
        <Users class="w-6 h-6 text-secondary" />
      </div>
      <div class="text-foreground font-semibold text-sm">1000+ —Ç—É—Ä–∏—Å—Ç–æ–≤</div>
      <div class="text-muted-foreground text-xs">–¥–æ–≤–æ–ª—å–Ω—ã</div>
    </div>
    <div class="text-center group">
      <div
        class="flex items-center justify-center w-12 h-12 bg-accent/20 rounded-full mx-auto mb-2 group-hover:bg-accent/30 transition-colors"
      >
        <Clock class="w-6 h-6 text-accent" />
      </div>
      <div class="text-foreground font-semibold text-sm">–ê–≤—Ç–æ—Ä—Å–∫–∏–µ</div>
      <div class="text-muted-foreground text-xs">–º–∞—Ä—à—Ä—É—Ç—ã</div>
    </div>
  </div>

  <!-- Popular destinations -->
  <div class="mb-6">
    <p class="text-foreground text-sm mb-3 font-semibold">
      –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
    </p>
    <div class="flex flex-wrap gap-2">
      <span
        class="px-3 py-1 bg-primary/20 text-primary text-sm rounded-full border border-primary/40 font-medium hover:bg-primary/30 transition-colors"
      >
        –ß–∏–Ω–∫–≤–µ-–¢–µ—Ä—Ä–µ
      </span>
      <span
        class="px-3 py-1 bg-primary/20 text-primary text-sm rounded-full border border-primary/40 font-medium hover:bg-primary/30 transition-colors"
      >
        –ü–æ—Ä—Ç–æ—Ñ–∏–Ω–æ
      </span>
      <span
        class="px-3 py-1 bg-primary/20 text-primary text-sm rounded-full border border-primary/40 font-medium hover:bg-primary/30 transition-colors"
      >
        –ö–∞–º–æ–ª—å–∏
      </span>
      <span
        class="px-3 py-1 bg-primary/20 text-primary text-sm rounded-full border border-primary/40 font-medium hover:bg-primary/30 transition-colors"
      >
        –ì–µ–Ω—É—è
      </span>
    </div>
  </div>

  <!-- Call to action -->
  {
    actions.length > 0 && (
      <div class="flex flex-wrap gap-3">
        {actions.map((action) => (
          <a
            href={action.href}
            class={getActionButtonClasses(action.variant)}
            target={action.external ? "_blank" : undefined}
            rel={action.external ? "noopener noreferrer" : undefined}
          >
            {action.icon && (
              <span class="mr-2" aria-hidden="true">
                {action.icon}
              </span>
            )}
            {action.label}
            {action.external && (
              <span class="ml-2 text-sm" aria-hidden="true">
                ‚Üó
              </span>
            )}
          </a>
        ))}
      </div>
    )
  }

  <!-- Trust signal -->
  <div class="mt-6 pt-4 border-t border-primary-foreground/20">
    <p class="text-foreground/70 text-xs text-center">
      ‚ú® –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ ‚Ä¢ üéØ –ê–≤—Ç–æ—Ä—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã ‚Ä¢ üí´ –ù–µ–∑–∞–±—ã–≤–∞–µ–º—ã–µ
      –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è
    </p>
  </div>
</div>
