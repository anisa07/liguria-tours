---
import IntlBaseLayout from "@/layouts/IntlBaseLayout.astro";
import { getPageTranslations } from "@/i18n/i18n";
import { defaultLocale, type Locale } from "@/i18n/config";
import { getEntry } from "astro:content";
import Hero from "@/components/content/Hero.astro";
import ItalianToursGallery from "@/components/content/ItalianToursGallery.astro";
import { getCollection } from "astro:content";

// Set locale to Russian
const locale: Locale = defaultLocale;

// Get the translation function for this page
const { t } = await getPageTranslations(locale, ["common", "ui", "home"]);

const heroEntry = await getEntry("hero", "hero");
const heroData = heroEntry?.data;

const toursEntry = await getCollection("italianToursGallery");
const italianToursGalleryData = toursEntry && toursEntry[0]?.data;
---

<IntlBaseLayout
  locale={locale}
  pageNS={["common", "ui", "home"]}
  seo={{
    title: t(
      "seo.title",
      "TechFlow - Modern Development Platform | Build the Future",
    ),
    description: t(
      "seo.description",
      "Streamline your development workflow with our powerful, secure, and scalable platform. Join 10M+ developers building the future with TechFlow.",
    ),
  }}
>
  <!-- Hero Section -->
  {
    heroData && (
      <Hero
        title={heroData.title}
        mainTitle={heroData.mainTitle}
        subtitle={heroData.subtitle}
        description={heroData.description}
        actions={[
          {
            label: t("actions.book_now", "Забронировать"),
            href: "/about-me",
            variant: "primary" as const,
          },
        ]}
        galleryImages={heroData.images}
        class="animate-fade-in"
      />
    )
  }

  <!-- Italian Tours Gallery -->
  {
    italianToursGalleryData && (
      <ItalianToursGallery
        locale={locale}
        italianToursGalleryData={italianToursGalleryData.tours}
      />
    )
  }
</IntlBaseLayout>

<style>
  section {
    border: none;
  }
</style>
